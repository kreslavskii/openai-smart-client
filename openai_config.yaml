# Конфигурация для универсального OpenAI API клиента
# Поддерживаемые модели: GPT-4o, GPT-4.1, O-серия, Search-модели, Deep Research
# Путь к файлу можно указать через переменную окружения OPENAI_CONFIG_PATH
# или передать напрямую при инициализации клиента

# API ключ берётся ТОЛЬКО из переменной окружения OPENAI_API_KEY
# НИКОГДА не храните API ключи в конфигурационных файлах!

# =============================================================================
# Основные параметры модели
# =============================================================================

model: "gpt-4o"  # Модель по умолчанию (см. список моделей ниже)
temperature: 0.7  # От 0 до 2. Низкие значения = детерминированные ответы

# Параметры токенов
max_completion_tokens: null  # Актуальный параметр (максимум токенов в ответе)
max_tokens: null  # Устаревший параметр, оставлен для обратной совместимости

# Параметры подключения
timeout: 60.0  # Таймаут запроса в секундах
base_url: null  # Кастомный base URL (для совместимых API)
organization: null  # ID организации OpenAI

# Параметры retry логики (экспоненциальная задержка с jitter)
max_retries: 3  # Количество попыток при ошибках
retry_delay: 1.0  # Базовая задержка между попытками в секундах
max_retry_delay: 60.0  # Верхний предел задержки (ограничивает экспоненциальный рост)

# =============================================================================
# Web Search конфигурация (для Responses API)
# =============================================================================

web_search:
  tool_choice: "auto"  # "auto" | "required" | "none"
  search_context_size: "medium"  # "low" | "medium" | "high"
  # user_location:  # Локация для персонализации результатов
  #   type: "approximate"
  #   country: "RU"
  #   city: "Moscow"
  #   region: "Moscow"

# =============================================================================
# Справочник моделей OpenAI
# =============================================================================
#
# СТАНДАРТНЫЕ МОДЕЛИ (Chat Completions API):
# ─────────────────────────────────────────────────────────────────────────────
# Alias              │ Snapshot                  │ Input $/1M │ Output $/1M
# ─────────────────────────────────────────────────────────────────────────────
# gpt-4o             │ gpt-4o-2024-11-20         │ 2.50       │ 10.00
# gpt-4o-mini        │ gpt-4o-mini-2024-07-18    │ 0.15       │ 0.60
# gpt-4.1            │ gpt-4.1-2025-04-14        │ 2.00       │ 8.00
# gpt-4.1-mini       │ gpt-4.1-mini-2025-04-14   │ 0.40       │ 1.60
# o4-mini            │ o4-mini-2025-04-16        │ 1.10       │ 4.40
# o3-mini            │ o3-mini-2025-01-31        │ 1.10       │ 4.40
# ─────────────────────────────────────────────────────────────────────────────
#
# SEARCH-МОДЕЛИ (Chat Completions API с встроенным web search):
# ─────────────────────────────────────────────────────────────────────────────
# gpt-4o-search-preview       │ Доступна без верификации org
# gpt-4o-mini-search-preview  │ Доступна без верификации org
# gpt-5-search-api            │ Может требовать верификации org
# ─────────────────────────────────────────────────────────────────────────────
#
# DEEP RESEARCH МОДЕЛИ (Responses API, длительный agentic поиск):
# ─────────────────────────────────────────────────────────────────────────────
# o3-deep-research            │ Требует хотя бы один источник данных
# o4-mini-deep-research       │ Требует хотя бы один источник данных
# ─────────────────────────────────────────────────────────────────────────────
#
# СПОСОБЫ WEB SEARCH:
#
# 1. Responses API + web_search tool (рекомендуемый):
#    - Используйте call_openai_web_search() или client.call_web_search()
#    - Работает с любой стандартной моделью (gpt-4o, gpt-4.1, o4-mini и др.)
#    - Модель сама решает искать или нет (tool_choice="auto")
#    - Или принудительный поиск (tool_choice="required")
#
# 2. Chat Completions + search-модели:
#    - Используйте call_openai(model="gpt-4o-search-preview")
#    - Web search встроен в модель, не требует tools
#
# 3. Deep Research (длительный agentic поиск):
#    - Модели o3-deep-research, o4-mini-deep-research
#    - Для сложных исследовательских задач
#
# =============================================================================

# Дополнительные параметры API (опционально, можно переопределить при вызове)
# Эти параметры будут использоваться по умолчанию, если не указаны явно
defaults:
  # top_p: 1.0  # Nucleus sampling (0-1)
  # frequency_penalty: 0.0  # Штраф за частоту (-2.0 до 2.0)
  # presence_penalty: 0.0  # Штраф за присутствие (-2.0 до 2.0)
  # n: 1  # Количество альтернативных ответов (1-128)
  # stop: null  # Последовательности для остановки генерации
  # seed: null  # Значение для детерминированных результатов
  # response_format: null  # Формат ответа: {"type": "json_object"} или {"type": "json_schema", "json_schema": {...}}
  # logprobs: false  # Включить логарифмы вероятностей
  # top_logprobs: null  # Количество топ-токенов для logprobs: 0 для отключения, 1-20 для включения
  # logit_bias: null  # Изменение вероятности токенов: {"token_id": bias_value} где bias_value от -100 до 100
  # tools: null  # Список инструментов для Function Calling
  # tool_choice: "auto"  # Стратегия выбора инструмента
  # parallel_tool_calls: true  # Разрешить параллельные вызовы функций
  # service_tier: "auto"  # Уровень обслуживания: "auto", "default", "flex", "priority"
  # store: false  # Сохранять запрос для дистилляции модели
